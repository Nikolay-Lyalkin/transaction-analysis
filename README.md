# Transaction_analysis

## Описание:
Transaction analysis - приложение для анализа транзакций, которые находятся в Excel-файле. Приложение будет генерировать JSON-данные для веб-страниц, формировать Excel-отчеты, а также предоставлять другие сервисы.

## Установка:
1. Клонируйте репозиторий:
- git clone git@github.com:Nikolay-Lyalkin/transaction-analysis.git
- [скопируйте ключ самостоятельно](https://github.com/Nikolay-Lyalkin/transaction-analysis)
2. Установите зависимости
3. -API_KEY:
- [получение курса иностранной валюты](https://www.currate.ru/)
- [получение стоимости ценных бумаг](https://api-ninjas.com/api/stockprice)

## Иструкция по использованию:
1. Модуль utils.py Реализуйте набор функций и главную функцию, принимающую на вход строку с датой и временем в формате 
YYYY-MM-DD HH:MM:SS и возвращающую JSON-ответ со следующими данными:

Приветствие в формате "???", где ??? — «Доброе утро» / «Добрый день» / «Добрый вечер» / «Доброй ночи» в зависимости 
от текущего времени.
- По каждой карте:
--последние 4 цифры карты;
--общая сумма расходов;
--кешбэк (1 рубль на каждые 100 рублей).
- Топ-5 транзакций по сумме платежа.
- Курс валют.
- Стоимость акций из S&P500.

2. Модуль services.py Сервис позволяет проанализировать, какие категории были наиболее выгодными для выбора в качестве
категорий повышенного кешбэка.
На вход функции поступают данные для анализа, год и месяц.

Входные параметры:
- data — данные с транзакциями;
- year — год, за который проводится анализ;
- month — месяц, за который проводится анализ. 

На выходе — JSON с анализом, сколько на каждой категории можно заработать кешбэка в указанном месяце года.

3. Модуль reports.py 

Функция принимает на вход:
- датафрейм с транзакциями,
- название категории,
- дату, если дата не передана, то берется текущая дата.

Функция возвращает траты по заданной категории за последние три месяца (от переданной даты).

## Логирование:
В корне проекта в папке logs реализованы выводы логирования модулей
## Тестирование:
В пакете tests проведено тестирование модулей.
В модуле conftest содержатся фикстуры для тестирования.


